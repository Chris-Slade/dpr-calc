(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(1333)}])},1333:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return eI}});var l,n=t(5893),r=t(1927),s=t(6720),i=t(7294),o=t.t(i,2),c=t(3457),u=t(476);let{useCallback:h}=o,d=["plusOneWeapon","plusTwoWeapon","plusThreeWeapon"],g=(e,a)=>h(t=>{e(e=>{let l={...e,[a]:t};return d.includes(a)&&t&&(d.forEach(e=>l[e]=!1),l[a]=!0),l})},[e,a]),x=e=>{let{value:a,onChange:t}=e;return(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(u.Z,{component:"legend",children:"Additional Bonuses"}),(0,n.jsx)(eF,{label:"Archery FS",title:"Archery Fighting Style (+2 to hit).",value:a.archeryFightingStyle,onChange:g(t,"archeryFightingStyle")}),(0,n.jsx)(eF,{label:"Dueling FS",title:"Dueling Fighting Style (+2 damage; also works for Thrown-Weapon Fighting Style).",value:a.duelingFightingStyle,onChange:g(t,"duelingFightingStyle")}),(0,n.jsx)(eF,{label:"Power Attack (-5/+10)",title:"Power Attacks for Sharpshooter or Great Weapon Master.",value:a.powerAttack,onChange:g(t,"powerAttack")}),(0,n.jsx)(eF,{label:"Rage",title:"Barbarian Rage",value:a.rage,onChange:g(t,"rage")}),(0,n.jsx)(eF,{label:"+1 Weapon (+1/+1)",value:a.plusOneWeapon,onChange:g(t,"plusOneWeapon")}),(0,n.jsx)(eF,{label:"+2 Weapon (+2/+2)",value:a.plusTwoWeapon,onChange:g(t,"plusTwoWeapon")}),(0,n.jsx)(eF,{label:"+3 Weapon (+3/+3)",value:a.plusThreeWeapon,onChange:g(t,"plusThreeWeapon")})]})};var p=t(7357),v=t(913),m=t(4876),j=t(480),f=t(9033);let b=e=>{let{label:a,value:t,onChange:l}=e;return(0,n.jsx)(p.Z,{children:(0,n.jsxs)(v.Z,{component:"fieldset",children:[(0,n.jsx)(u.Z,{component:"legend",children:a}),(0,n.jsxs)(m.Z,{"aria-label":"Advantage/Disadvantage",defaultValue:"normal",name:"radio-buttons-group",row:!0,value:t,onChange:e=>l(e.target.value),children:[(0,n.jsx)(j.Z,{value:"normal",control:(0,n.jsx)(f.Z,{}),label:"Normal"}),(0,n.jsx)(j.Z,{value:"advantage",control:(0,n.jsx)(f.Z,{}),label:"Advantage"}),(0,n.jsx)(j.Z,{value:"disadvantage",control:(0,n.jsx)(f.Z,{}),label:"Disadvantage"}),(0,n.jsx)(j.Z,{value:"super_advantage",control:(0,n.jsx)(f.Z,{}),label:"Super Advantage",title:"The highest of 3d20, e.g. for Elven Accuracy."})]})]})})};var Z=e=>Math.max(2,2+Math.floor((e-1)/4));let y=e=>{let{onChange:a,level:t,proficient:l,setProficient:r}=e,[s,o]=(0,i.useState)(0);return(0,i.useEffect)(()=>{a(l?s+Z(t):s)},[s,l,t]),(0,n.jsxs)(p.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:3,children:[(0,n.jsx)(W,{sx:{flexGrow:1},label:"Attack Mods",title:"Any modifiers to hit besides proficiency bonus, such as your attack modifier, Archery, Sharpshooter, +1/2/3 weapons, etc.",name:"to-hit",value:s,onChange:o}),(0,n.jsx)(G,{label:"Auto proficiency",title:"If checked, the attacker's Proficiency Bonus will be included in its modifiers on the attack roll(s).",value:l,onChange:r})]})};var w=t(8577),C=t(1496);let k=e=>{let a=parseFloat(e);return isNaN(a)?0:a},S=(0,C.ZP)(w.Z)({minWidth:"8ch",maxWidth:"30ch"}),A=e=>{let{value:a,onChange:t,...l}=e;return(0,n.jsx)(S,{variant:"outlined",type:"number",value:a||"",onChange:e=>t(k(e.target.value)),...l})};var W=A;let D=e=>e<5?1:e<11?2:e<17?3:4,P=e=>e<5?1:e<11?2:e<20?3:4,{useEffect:T,useState:B}=o,F=e=>{let{value:a,onChange:t,level:l}=e,[r,s]=B("manual");return T(()=>{"cantrip"===r?t(D(l)):"fighter"===r?t(P(l)):"fighter-ba"===r&&t(P(l)+1)},[l,r]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(v.Z,{component:"fieldset",children:[(0,n.jsx)(u.Z,{component:"legend",sx:{marginBottom:1},children:"Attack Progression"}),(0,n.jsxs)(m.Z,{"aria-label":"Attack Progression",defaultValue:"manual",name:"radio-buttons-group",value:r,onChange:e=>s(e.target.value),children:[(0,n.jsx)(j.Z,{value:"manual",control:(0,n.jsx)(f.Z,{}),label:(0,n.jsx)(W,{label:"Manual",title:"Total number of attacks the attacker makes during a round.",name:"attacks",value:a,size:"small",onChange:t,disabled:"manual"!==r})}),(0,n.jsx)(j.Z,{value:"fighter",control:(0,n.jsx)(f.Z,{}),label:"Fighter"}),(0,n.jsx)(j.Z,{value:"fighter-ba",control:(0,n.jsx)(f.Z,{}),label:"Fighter (with BA attack)"}),(0,n.jsx)(j.Z,{value:"cantrip",control:(0,n.jsx)(f.Z,{}),label:"Cantrip (EB)"})]})]})})},E=e=>{let{value:a,onChange:t}=e;return(0,n.jsx)(p.Z,{children:(0,n.jsxs)(v.Z,{component:"fieldset",children:[(0,n.jsx)(u.Z,{component:"legend",children:"Baseline Type"}),(0,n.jsxs)(m.Z,{"aria-label":"Baseline Type",defaultValue:"warlock",name:"radio-buttons-group",row:!0,value:a,onChange:e=>t(e.target.value),children:[(0,n.jsx)(j.Z,{value:"warlock",control:(0,n.jsx)(f.Z,{}),label:"Warlock"}),(0,n.jsx)(j.Z,{value:"fighter",control:(0,n.jsx)(f.Z,{}),label:"Fighter"}),(0,n.jsx)(j.Z,{value:"rogue",control:(0,n.jsx)(f.Z,{}),label:"Rogue"})]})]})})};var M=t(629),N=t(5861);let _=(0,C.ZP)(p.Z)(e=>{let{theme:a}=e;return{display:"flex",flex:"0 100%",flexDirection:"row",flexWrap:"wrap",height:"100%",width:"100%",padding:a.spacing(1),gap:a.spacing(1)}}),O=(0,C.ZP)(M.Z)(e=>{let{theme:a}=e;return{display:"flex",flexDirection:"column",padding:a.spacing(3),gap:a.spacing(3),flex:"1 1 0px",minWidth:"20em"}}),R=Object.freeze({d4:0,d6:0,d8:0,d10:0,d12:0,d20:0}),I=()=>{let[e,a]=(0,i.useState)(0),[t,l]=(0,i.useState)(0),[r,s]=(0,i.useState)({archeryFightingStyle:!1,duelingFightingStyle:!1,powerAttack:!1,plusOneWeapon:!1,plusTwoWeapon:!1,plusThreeWeapon:!1,rage:!1}),[o,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(1),[d,g]=(0,i.useState)(20),[p,v]=(0,i.useState)(R),[m,j]=(0,i.useState)(R),[f,w]=(0,i.useState)("normal"),[C,k]=(0,i.useState)("normal"),[S,A]=(0,i.useState)(0),[D,P]=(0,i.useState)(R),[T,B]=(0,i.useState)(0),[E,M]=(0,i.useState)(!1),[I,H]=(0,i.useState)(!1),[X,G]=(0,i.useState)(0),[z,U]=(0,i.useState)(R),V=Z(u);return(0,n.jsxs)(_,{children:[(0,n.jsxs)(O,{children:[(0,n.jsx)(N.Z,{variant:"h5",children:"Accuracy"}),(0,n.jsx)(W,{label:"Level/CR (PB = ".concat(V,")"),title:"The level or Challenge Rating (CR) of the attacker, which determines its Proficiency Bonus (PB).",name:"level",value:u,onChange:h,InputProps:{inputProps:{min:0,max:30}}}),(0,n.jsx)(y,{value:t,onChange:l,proficient:o,setProficient:c,level:u}),(0,n.jsx)(eN,{value:e,onChange:a,level:u}),(0,n.jsx)(eF,{label:"Show Advanced Options",value:E,onChange:()=>{M(e=>!e)}}),E&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W,{label:"Crit Threshold",title:"The minimum roll on the d20 needed to get a critical hit.",InputProps:{inputProps:{min:1,max:20}},value:d,onChange:g}),(0,n.jsx)(x,{value:r,onChange:s}),(0,n.jsx)($,{label:"Bonus Dice",title:"Any dice that are added to your to-hit bonus (e.g. Bless).",value:p,onChange:v}),(0,n.jsx)($,{label:"Penalty Dice",title:"Any dice that are subtracted from your to-hit bonus (e.g. Bane).",value:m,onChange:j}),(0,n.jsx)(b,{label:"Advantage/Disadvantage",value:f,onChange:w}),(0,n.jsx)(b,{label:"Baseline Advantage/Disadvantage",value:C,onChange:k})]})]}),(0,n.jsxs)(O,{children:[(0,n.jsx)(N.Z,{variant:"h5",children:"Damage"}),(0,n.jsx)(F,{level:u,value:S,onChange:A}),(0,n.jsx)(q,{value:T,onChange:B,attackModifiersSansPb:o?t-V:t}),(0,n.jsx)($,{label:"Damage Dice",value:D,onChange:P}),(0,n.jsx)(eF,{label:"Show Advanced Options",value:I,onChange:()=>{H(e=>!e)}}),I&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W,{label:"First-Hit Bonus Damage",title:"Bonus damage that is only dealt on the first hit you make on a turn.",value:X,onChange:G}),(0,n.jsx)($,{label:"First-Hit Bonus Dice",title:"Bonus damage dice that are only dealt on the first hit you make on a turn (e.g. Sneak Attack).",value:z,onChange:U})]})]}),(0,n.jsxs)(O,{sx:{flexGrow:2},children:[(0,n.jsx)(N.Z,{variant:"h5",children:"Outputs"}),(0,n.jsx)(eP,{additionalMods:r,advantage:f,attackMods:t,attacks:S,baselineAdvantage:C,bonusDice:p,critThreshold:d,damageDice:D,damageMods:T,firstHitBonus:X,firstHitBonusDice:z,level:u,penaltyDice:m,targetAC:e})]})]})};var H=t(9368);let X=e=>{let{value:a,onChange:t,label:l,...r}=e;return(0,n.jsx)(j.Z,{control:(0,n.jsx)(H.Z,{...r,checked:a,onChange:(e,a)=>{t(a)}}),label:l})};var G=X;let{useEffect:z,useState:U}=o,V=e=>{let{attackModifiersSansPb:a,value:t,onChange:l}=e,[r,s]=U(!1);return z(()=>{r&&l(a)},[r,a]),(0,n.jsxs)(p.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:3,children:[(0,n.jsx)(W,{sx:{flexGrow:1},label:"Damage Mods",title:"Any modifiers to damage, such as your attack modifier, Sharpshooter, +1/+2/+3 weapons, etc.",value:t,onChange:l,disabled:r}),(0,n.jsx)(G,{label:"Same as attack mod",title:"If checked, the attack mod minus your Proficiency Bonus will be used as the damage mod.",value:r,onChange:s})]})};var q=V;let L=["d4","d6","d8","d10","d12","d20"],J=(0,C.ZP)(p.Z)(e=>{let{theme:a}=e;return{gap:a.spacing(3),display:"flex",flexFlow:"row wrap",flex:"1 1 0",maxWidth:"calc(3 * (10ch + ".concat(a.spacing(3),"))")}}),K=(0,C.ZP)(W)({maxWidth:"10ch"}),Q=e=>{let{die:a,value:t,onChange:l}=e;return(0,n.jsx)(K,{label:a,name:a,value:t[a],onChange:e=>l({...t,[a]:e}),inputProps:{min:0}})},Y=e=>{let{label:a,title:t,value:l,onChange:r}=e;return(0,n.jsxs)(p.Z,{display:"flex",flexDirection:"column",title:t,children:[(0,n.jsx)(u.Z,{sx:{marginBottom:3},children:a}),(0,n.jsx)(J,{children:L.map((e,a)=>(0,n.jsx)(Q,{die:e,value:l,onChange:r},a))})]})};var $=Y;let ee=e=>{let{label:a,value:t,style:l="decimal"}=e,r=isNaN(t)?"n/a":new Intl.NumberFormat("en-US",{style:l,maximumFractionDigits:"decimal"===l?10:2}).format(t),s=String(t),i=!isNaN(t)&&("percent"===l?s.length!==r.length-1:s.length!==r.length);return(0,n.jsxs)(N.Z,{title:i?s:void 0,children:[a?"".concat(a,": "):"",r]})};var ea=t(2882),et=t(7906),el=t(3184),en=t(3816),er=t(3252),es=t(295);let ei=e=>e<9?2:e<16?3:4;var eo=(e,a,t,l)=>(e.archeryFightingStyle&&(a+=2),e.duelingFightingStyle&&(t+=2),e.plusOneWeapon&&(a+=1,t+=1),e.plusTwoWeapon&&(a+=2,t+=2),e.plusThreeWeapon&&(a+=3,t+=3),e.powerAttack&&(a-=5,t+=10),e.rage&&(t+=ei(l)),[a,t]),ec=(e,a)=>{let t=(21-e)/20,l=1-t;return"normal"===a?t:"advantage"===a?1-l**2:"super_advantage"===a?1-l**3:t**2},eu=e=>{switch(e){case"d4":return 4;case"d6":return 6;case"d8":return 8;case"d10":return 10;case"d12":return 12;case"d20":return 20;default:throw TypeError("Not a die: ".concat(e))}},eh=(e,a,t)=>Math.max(Math.min(e,t),a);let ed=(e,a)=>{for(let t=1;t<=a;t+=1)e.push(0);for(let t=e.length-1;t>=0;t-=1){e[t]=0;for(let l=t-1;l>=t-a&&l>=0;l-=1)e[t]+=e[l];e[t]/=a}},eg=e=>{let a=[1];for(let t of Object.entries(e)){let[e,l]=t;for(let t=0;t<l;t++)ed(a,eu(e))}return a},ex=(e,a,t,l)=>{let n=eh(21+e-a,21-t,19)/20,r=1-n;return"normal"===l?n:"advantage"===l?1-r**2:"super_advantage"===l?1-r**3:n**2};function ep(e,a,t){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=eg(n),i=eg(r),o=0;for(let n=0;n<s.length;n++)for(let r=0;r<i.length;r++)o+=s[n]*i[r]*ex(e+n-r,a,t,l);return o}let ev=e=>{switch(e){case"d4":return 4;case"d6":return 6;case"d8":return 8;case"d10":return 10;case"d12":return 12;case"d20":return 20}};var em=e=>(1+ev(e))/2,ej=e=>Object.keys(e).reduce((a,t)=>a+em(t)*(null!==(l=null==e?void 0:e[t])&&void 0!==l?l:0),0),ef=(e,a,t,l)=>{let n=ej(t);return e*(n+l)+a*n},eb=(e,a,t,l,n)=>{let r=ej(l),s=1-a;return(1-(1-a)**e)*(n+r)+t*((1-s**e)/(1-s))*r};let eZ=e=>e<4?3:e<8?4:5,ey=e=>e<2?0:eZ(e),ew=(e,a,t)=>{let l=ep(eZ(e)+Z(e),a,20,t),n=D(e)*ef(l,ec(20,t),{d4:0,d6:1,d8:0,d10:1,d12:0,d20:0},ey(e));return{accuracy:l,damage:n}},eC=e=>e>=20?4:e>=11?3:e>=5?2:1,ek=(e,a,t)=>{let l=e>=8?5:e>=6?4:3,n=Z(e),r=eC(e)+1,s=ep(l+n+(e>=4?-5:0)+2,a,20,t),i=r*ef(s,ec(20,t),{d6:1},l+(e>=4?10:0));return{accuracy:s,damage:i}},eS=(e,a,t)=>{let l=e>=8?5:e>=4?4:3,n=Z(e),r=ep(l+n,a,20,t),s=ef(r,ec(20,t),{d8:1,d6:Math.ceil(e/2)},l);return{accuracy:r,damage:s}};var eA=(e,a,t,l)=>{switch(e){case"warlock":return ew(a,t,l);case"fighter":return ek(a,t,l);case"rogue":return eS(a,t,l);default:throw TypeError("Not a baseline type: ".concat(e))}};let eW=e=>{let{title:a,rows:t}=e;return(0,n.jsx)(ea.Z,{component:M.Z,elevation:1,sx:{maxWidth:"max-content"},children:(0,n.jsxs)(et.Z,{children:[(0,n.jsx)(el.Z,{children:(0,n.jsx)(en.Z,{children:(0,n.jsx)(er.Z,{colSpan:2,variant:"head",sx:{fontWeight:"h3.fontWeight"},children:a})})}),(0,n.jsx)(es.Z,{children:t.map(e=>(0,n.jsxs)(en.Z,{children:[(0,n.jsx)(er.Z,{children:e.label}),(0,n.jsx)(er.Z,{children:(0,n.jsx)(ee,{value:e.value,style:e.style})})]},e.label))})]})})},eD=e=>{let{additionalMods:a,advantage:t,attackMods:l,attacks:r,baselineAdvantage:s,bonusDice:o,critThreshold:c,damageDice:u,damageMods:h,firstHitBonus:d,firstHitBonusDice:g,level:x,penaltyDice:v,targetAC:m}=e,[j,f]=(0,i.useState)("warlock"),[b,Z]=eo(a,l,h,x),y=ec(c,t),w=ep(b,m,c,t,o,v),C=r*ef(w,y,u,Z)+eb(r,w,ec(c,t),g,d),k=eA(j,x,m,s),S=[{label:"Sum of attack modifiers",style:"decimal",value:b},{label:"Chance to hit AC ".concat(m),style:"percent",value:w},{label:"Baseline chance to hit",style:"percent",value:k.accuracy},{label:"Percentage of baseline",style:"percent",value:w/k.accuracy}],A=[{label:"Sum of damage modifiers",style:"decimal",value:Z},{label:"Average damage per round",style:"decimal",value:C},{label:"Baseline average damage per round",style:"decimal",value:k.damage},{label:"Percentage of baseline",style:"percent",value:C/k.damage}];return(0,n.jsxs)(p.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:3,children:[(0,n.jsx)(eW,{title:"Accuracy",rows:S}),(0,n.jsx)(eW,{title:"Damage",rows:A}),(0,n.jsx)(E,{value:j,onChange:f}),(0,n.jsx)(N.Z,{component:"p",variant:"subtitle2",maxWidth:"80ch",children:"The warlock baseline starts with 16 CHA, increases it to 18 at 4th level and 20 at 8th level, and attacks using Eldritch Blast with Agonizing Blast and Hex."}),(0,n.jsx)(N.Z,{component:"p",variant:"subtitle2",maxWidth:"80ch",children:"The fighter baseline starts with 16 DEX, the Archery Fighting Style, and the Crossbow Expert feat. It takes the Sharpshooter feat at 4th level and increases DEX to 18 at 6th level and 20 at 8th level."}),(0,n.jsx)(N.Z,{component:"p",variant:"subtitle2",maxWidth:"80ch",children:"The rogue baseline starts with 16 DEX and uses a rapier with Sneak Attack. It increases DEX to 18 at 4th level and 20 at 8th level."})]})};var eP=eD,eT=t(5843);let eB=e=>{let{value:a,onChange:t,label:l,...r}=e;return(0,n.jsx)(j.Z,{control:(0,n.jsx)(eT.Z,{...r,checked:a,onChange:(e,a)=>{t(a)}}),label:l})};var eF=eB,eE=e=>e<=1/8?12:13+Math.floor(e/3);let eM=e=>{let{level:a,onChange:t,value:l}=e,[r,s]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{r&&t(eE(a))},[a,r]),(0,n.jsxs)(p.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:3,children:[(0,n.jsx)(W,{sx:{flexGrow:1},InputProps:{inputProps:{min:0}},label:"Target AC",title:"The Armor Class (AC) of the enemy being attacked.",name:"ac",value:l,onChange:t,disabled:r}),(0,n.jsx)(G,{label:"Use average AC",title:"Use the average AC for a monster whose CR equals your level (equal to 13 + CR/3 for CRs above 1/8).",value:r,onChange:s})]})};var eN=eM,e_=t(9008),eO=t.n(e_),eR=(0,t(1265).Z)({palette:{mode:"dark"}});function eI(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eO(),{children:[(0,n.jsx)("title",{children:"DPR Calculator"}),(0,n.jsx)("meta",{name:"description",content:"A DPR calculator for 5e"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,n.jsx)("main",{children:(0,n.jsxs)(r.Z,{theme:eR,children:[(0,n.jsx)(s.ZP,{}),(0,n.jsx)(I,{})]})})]})}}},function(e){e.O(0,[437,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);