(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8006)}])},8006:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return eI}});var l,n=t(5893),r=t(7294),s=t.t(r,2),i=t(1927),o=t(6720),c=t(3457),u=t(476);let{useCallback:d}=s,h=["plusOneWeapon","plusTwoWeapon","plusThreeWeapon"],g=(e,a)=>d(t=>{e(e=>{let l={...e,[a]:t};return h.includes(a)&&t&&(h.forEach(e=>l[e]=!1),l[a]=!0),l})},[e,a]),x=e=>{let{value:a,onChange:t}=e;return(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(u.Z,{component:"legend",children:"Additional Bonuses"}),(0,n.jsx)(L,{label:"Archery FS",title:"Archery Fighting Style (+2 to hit).",value:a.archeryFightingStyle,onChange:g(t,"archeryFightingStyle")}),(0,n.jsx)(L,{label:"Dueling FS",title:"Dueling Fighting Style (+2 damage; also works for Thrown-Weapon Fighting Style).",value:a.duelingFightingStyle,onChange:g(t,"duelingFightingStyle")}),(0,n.jsx)(L,{label:"Power Attack (-5/+10)",title:"Power Attacks for Sharpshooter or Great Weapon Master.",value:a.powerAttack,onChange:g(t,"powerAttack")}),(0,n.jsx)(L,{label:"Proficiency Bonus",value:a.proficient,onChange:g(t,"proficient")}),(0,n.jsx)(L,{label:"Rage",title:"Barbarian Rage",value:a.rage,onChange:g(t,"rage")}),(0,n.jsx)(L,{label:"+1 Weapon (+1/+1)",value:a.plusOneWeapon,onChange:g(t,"plusOneWeapon")}),(0,n.jsx)(L,{label:"+2 Weapon (+2/+2)",value:a.plusTwoWeapon,onChange:g(t,"plusTwoWeapon")}),(0,n.jsx)(L,{label:"+3 Weapon (+3/+3)",value:a.plusThreeWeapon,onChange:g(t,"plusThreeWeapon")})]})};var p=t(7357),v=t(913),m=t(4876),j=t(480),f=t(9033);let b=e=>{let{label:a,value:t,onChange:l}=e;return(0,n.jsx)(p.Z,{children:(0,n.jsxs)(v.Z,{component:"fieldset",children:[(0,n.jsx)(u.Z,{component:"legend",children:a}),(0,n.jsxs)(m.Z,{"aria-label":"Advantage/Disadvantage",defaultValue:"normal",name:"radio-buttons-group",row:!0,value:t,onChange:e=>l(e.target.value),children:[(0,n.jsx)(j.Z,{value:"normal",control:(0,n.jsx)(f.Z,{}),label:"Normal"}),(0,n.jsx)(j.Z,{value:"advantage",control:(0,n.jsx)(f.Z,{}),label:"Advantage"}),(0,n.jsx)(j.Z,{value:"disadvantage",control:(0,n.jsx)(f.Z,{}),label:"Disadvantage"}),(0,n.jsx)(j.Z,{value:"super_advantage",control:(0,n.jsx)(f.Z,{}),label:"Super Advantage",title:"The highest of 3d20, e.g. for Elven Accuracy."})]})]})})},y=e=>e<5?1:e<11?2:e<17?3:4,Z=e=>e<5?1:e<11?2:e<20?3:4;var C=t(8577);let w=e=>{let a=parseFloat(e);return isNaN(a)?0:a},S=e=>{let{value:a,onChange:t,...l}=e;return(0,n.jsx)(C.Z,{variant:"outlined",type:"number",value:a||"",onChange:e=>t(w(e.target.value)),sx:e=>({minWidth:"8ch",maxWidth:"calc(3 * (10ch + ".concat(e.spacing(3),"))")}),...l})},{useEffect:k,useState:D}=s,A=e=>{let{value:a,onChange:t,level:l}=e,[r,s]=D("manual");return k(()=>{"cantrip"===r?t(y(l)):"fighter"===r?t(Z(l)):"fighter-ba"===r&&t(Z(l)+1)},[l,r]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(v.Z,{component:"fieldset",children:[(0,n.jsx)(u.Z,{component:"legend",sx:{marginBottom:1},children:"Attack Progression"}),(0,n.jsxs)(m.Z,{"aria-label":"Attack Progression",defaultValue:"manual",name:"radio-buttons-group",value:r,onChange:e=>s(e.target.value),children:[(0,n.jsx)(j.Z,{value:"manual",control:(0,n.jsx)(f.Z,{}),label:(0,n.jsx)(S,{label:"Manual",title:"Total number of attacks the attacker makes during a round.",name:"attacks",value:a,size:"small",onChange:t,disabled:"manual"!==r})}),(0,n.jsx)(j.Z,{value:"fighter",control:(0,n.jsx)(f.Z,{}),label:"Fighter"}),(0,n.jsx)(j.Z,{value:"fighter-ba",control:(0,n.jsx)(f.Z,{}),label:"Fighter (with BA attack)"}),(0,n.jsx)(j.Z,{value:"cantrip",control:(0,n.jsx)(f.Z,{}),label:"Cantrip (EB)"})]})]})})};var W=t(5861),B=t(1536);let T=e=>{let{children:a}=e;return(0,n.jsx)(W.Z,{component:"p",variant:"subtitle2",maxWidth:"60ch",children:a})},F=e=>{let{value:a,onChange:t}=e;return(0,n.jsxs)(B.Z,{gap:3,children:[(0,n.jsxs)(v.Z,{component:"fieldset",children:[(0,n.jsx)(u.Z,{component:"legend",children:"Baseline Type"}),(0,n.jsxs)(m.Z,{"aria-label":"Baseline Type",defaultValue:"warlock",name:"radio-buttons-group",row:!0,value:a,onChange:e=>t(e.target.value),children:[(0,n.jsx)(j.Z,{value:"warlock",control:(0,n.jsx)(f.Z,{}),label:"Warlock"}),(0,n.jsx)(j.Z,{value:"fighter",control:(0,n.jsx)(f.Z,{}),label:"Fighter"}),(0,n.jsx)(j.Z,{value:"rogue",control:(0,n.jsx)(f.Z,{}),label:"Rogue"})]})]}),(0,n.jsx)(T,{children:"The warlock baseline starts with 16 CHA, increases it to 18 at 4th level and 20 at 8th level, and attacks using Eldritch Blast with Agonizing Blast and Hex."}),(0,n.jsx)(T,{children:"The fighter baseline starts with 16 DEX, the Archery Fighting Style, and the Crossbow Expert feat. It takes the Sharpshooter feat at 4th level and increases DEX to 18 at 6th level and 20 at 8th level."}),(0,n.jsx)(T,{children:"The rogue baseline starts with 16 DEX and uses a rapier with Sneak Attack. It increases DEX to 18 at 4th level and 20 at 8th level."})]})};var P=t(629),M=t(948),E=e=>Math.max(2,2+Math.floor((e-1)/4));let O=(0,M.ZP)(p.Z)(e=>{let{theme:a}=e;return{display:"flex",flex:"0 100%",flexDirection:"row",flexWrap:"wrap",height:"100%",width:"100%",padding:a.spacing(1),gap:a.spacing(1)}}),N=(0,M.ZP)(P.Z)(e=>{let{theme:a}=e;return{display:"flex",flexDirection:"column",padding:a.spacing(3),gap:a.spacing(3),flex:"1 1 0px",minWidth:"20em"}}),_=Object.freeze({d4:0,d6:0,d8:0,d10:0,d12:0,d20:0}),H=()=>{let[e,a]=(0,r.useState)(0),[t,l]=(0,r.useState)(0),[s,i]=(0,r.useState)({archeryFightingStyle:!1,duelingFightingStyle:!1,powerAttack:!1,proficient:!1,plusOneWeapon:!1,plusTwoWeapon:!1,plusThreeWeapon:!1,rage:!1}),[o,c]=(0,r.useState)(1),[u,d]=(0,r.useState)(20),[h,g]=(0,r.useState)(_),[p,v]=(0,r.useState)(_),[m,j]=(0,r.useState)("normal"),[f,y]=(0,r.useState)("normal"),[Z,C]=(0,r.useState)(0),[w,k]=(0,r.useState)(_),[D,B]=(0,r.useState)(0),[T,F]=(0,r.useState)(!1),[P,M]=(0,r.useState)(!1),[H,R]=(0,r.useState)(0),[I,L]=(0,r.useState)(_),[X,V]=(0,r.useState)(0),[z,G]=(0,r.useState)(_),q=E(o);return(0,n.jsxs)(O,{children:[(0,n.jsxs)(N,{children:[(0,n.jsx)(W.Z,{variant:"h5",children:"Accuracy"}),(0,n.jsx)(S,{label:"Level/CR (PB = ".concat(q,")"),title:"The level or Challenge Rating (CR) of the attacker, which determines its Proficiency Bonus (PB).",name:"level",value:o,onChange:c,InputProps:{inputProps:{min:0,max:30}}}),(0,n.jsx)(S,{label:"Attack Mods",title:"Any modifiers to hit besides proficiency bonus, such as your attack modifier, Archery, Sharpshooter, +1/2/3 weapons, etc.",value:t,onChange:l}),(0,n.jsx)(eN,{value:e,onChange:a,level:o}),(0,n.jsx)(x,{value:s,onChange:i}),(0,n.jsx)(eM,{label:"Show Advanced Options",value:T,onChange:()=>{F(e=>!e)}}),T&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,{label:"Advantage/Disadvantage",value:m,onChange:j}),(0,n.jsx)(b,{label:"Baseline Advantage/Disadvantage",value:f,onChange:y}),(0,n.jsx)(S,{label:"Crit Threshold",title:"The minimum roll on the d20 needed to get a critical hit.",InputProps:{inputProps:{min:1,max:20}},value:u,onChange:d}),(0,n.jsx)(Y,{label:"Bonus Dice",title:"Any dice that are added to your to-hit bonus (e.g. Bless).",value:h,onChange:g}),(0,n.jsx)(Y,{label:"Penalty Dice",title:"Any dice that are subtracted from your to-hit bonus (e.g. Bane).",value:p,onChange:v})]})]}),(0,n.jsxs)(N,{children:[(0,n.jsx)(W.Z,{variant:"h5",children:"Damage"}),(0,n.jsx)(A,{level:o,value:Z,onChange:C}),(0,n.jsx)(U,{label:"Damage",title:"The dice and modifiers that make up your base attack damage, such as your attack modifier, Sharpshooter, +1/+2/+3 weapons, Improved Divine Smite, etc. Shortcuts for common bonuses can be found in the advanced options of the Accuracy section.",damageMods:D,setDamageMods:B,damageDice:w,setDamageDice:k,attackModDefault:t}),(0,n.jsx)(eM,{label:"Show Advanced Options",value:P,onChange:()=>{M(e=>!e)}}),P&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{label:"First-Hit Bonus Damage",title:"Bonus damage that is only dealt on the first hit you make on a turn (e.g. Sneak Attack, Favored Foe).",damageMods:H,setDamageMods:R,damageDice:I,setDamageDice:L}),(0,n.jsx)(U,{label:"Critical-Hit Bonus Damage",title:"Bonus damage dealt on a critical (e.g. Brutal Critical, Vicious Weapon). Note that the doubling of your damage dice on a crit is done automatically; this is only for additional dice from other features.",damageMods:X,setDamageMods:V,damageDice:z,setDamageDice:G})]})]}),(0,n.jsxs)(N,{sx:{flexGrow:2},children:[(0,n.jsx)(W.Z,{variant:"h5",children:"Outputs"}),(0,n.jsx)(eT,{additionalMods:s,advantage:m,attackMods:t,attacks:Z,baselineAdvantage:f,bonusDice:h,critBonus:X,critBonusDice:z,critThreshold:u,damageDice:w,damageMods:D,firstHitBonus:H,firstHitBonusDice:I,level:o,penaltyDice:p,targetAC:e})]})]})};var R=t(9368);let I=e=>{let{value:a,onChange:t,label:l,title:r,...s}=e;return(0,n.jsx)(j.Z,{title:r,control:(0,n.jsx)(R.Z,{...s,title:r,checked:a,onChange:(e,a)=>{t(a)}}),label:l})};var L=I;let X=e=>{let{label:a,title:t,damageMods:l,setDamageMods:r,damageDice:s,setDamageDice:i,attackModDefault:o}=e;return(0,n.jsx)(B.Z,{gap:3,children:(0,n.jsx)(Y,{label:a,title:t,value:s,onChange:i,children:(0,n.jsx)(z,{title:t,value:l,onChange:r,attackModDefault:o})})})};var U=X;let V=e=>{let{title:a,value:t,onChange:l,attackModDefault:s}=e,[i,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i&&null!=s&&l(s)},[i,s]),(0,n.jsxs)(B.Z,{flexDirection:"row",gap:3,children:[(0,n.jsx)(S,{label:"Modifiers",title:a,value:t,onChange:l,disabled:i}),null!=s?(0,n.jsx)(L,{label:"Use attack mod",title:"If checked, the attack mod will be used as the damage mod.",value:i,onChange:o}):null]})};var z=V;let G=["d4","d6","d8","d10","d12","d20"],q=(0,M.ZP)(p.Z)(e=>{let{theme:a}=e;return{gap:a.spacing(3),display:"flex",flexFlow:"row wrap",flex:"1 1 0",maxWidth:"calc(3 * (10ch + ".concat(a.spacing(3),"))")}}),J=(0,M.ZP)(S)({maxWidth:"10ch"}),K=e=>{let{die:a,value:t,onChange:l}=e;return(0,n.jsx)(J,{label:a,name:a,value:t[a],onChange:e=>l({...t,[a]:e}),inputProps:{min:0}})},Q=e=>{let{label:a,title:t,value:l,onChange:r,children:s}=e;return(0,n.jsxs)(B.Z,{flexDirection:"column",title:t,children:[(0,n.jsx)(u.Z,{sx:{marginBottom:3},children:a}),(0,n.jsxs)(q,{children:[G.map((e,a)=>(0,n.jsx)(K,{die:e,value:l,onChange:r},a)),s]})]})};var Y=Q;let $=e=>{let{label:a,value:t,style:l="decimal"}=e,r=isNaN(t)?"n/a":new Intl.NumberFormat("en-US",{style:l,maximumFractionDigits:"decimal"===l?10:2}).format(t),s=String(t),i=!isNaN(t)&&("percent"===l?s.length!==r.length-1:s.length!==r.length);return(0,n.jsxs)(W.Z,{title:i?s:void 0,children:[a?"".concat(a,": "):"",r]})};var ee=t(2882),ea=t(7906),et=t(3184),el=t(3816),en=t(3252),er=t(295);let es=e=>e<9?2:e<16?3:4;var ei=(e,a,t,l)=>(e.archeryFightingStyle&&(a+=2),e.duelingFightingStyle&&(t+=2),e.plusOneWeapon&&(a+=1,t+=1),e.plusTwoWeapon&&(a+=2,t+=2),e.plusThreeWeapon&&(a+=3,t+=3),e.powerAttack&&(a-=5,t+=10),e.proficient&&(a+=E(l)),e.rage&&(t+=es(l)),[a,t]),eo=e=>{switch(e){case"d4":return 4;case"d6":return 6;case"d8":return 8;case"d10":return 10;case"d12":return 12;case"d20":return 20;default:throw TypeError("Not a die: ".concat(e))}},ec=(e,a,t)=>Math.max(Math.min(e,t),a);let eu=(e,a)=>{for(let t=1;t<=a;t+=1)e.push(0);for(let t=e.length-1;t>=0;t-=1){e[t]=0;for(let l=t-1;l>=t-a&&l>=0;l-=1)e[t]+=e[l];e[t]/=a}},ed=e=>{let a=[1];for(let t of Object.entries(e)){let[e,l]=t;for(let t=0;t<l;t++)eu(a,eo(e))}return a},eh=(e,a,t,l)=>{let n=ec(21+e-a,21-t,19)/20,r=1-n;return"normal"===l?n:"advantage"===l?1-r**2:"super_advantage"===l?1-r**3:n**2};function eg(e,a,t){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=ed(n),i=ed(r),o=0;for(let n=0;n<s.length;n++)for(let r=0;r<i.length;r++)o+=s[n]*i[r]*eh(e+n-r,a,t,l);return o}var ex=(e,a)=>{let t=(21-e)/20,l=1-t;return"normal"===a?t:"advantage"===a?1-l**2:"super_advantage"===a?1-l**3:t**2};let ep=e=>{switch(e){case"d4":return 4;case"d6":return 6;case"d8":return 8;case"d10":return 10;case"d12":return 12;case"d20":return 20}};var ev=e=>(1+ep(e))/2,em=e=>Object.keys(e).reduce((a,t)=>a+ev(t)*(null!==(l=null==e?void 0:e[t])&&void 0!==l?l:0),0);function ej(e,a,t,l){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=em(t),i=em(n);return e*(s+l)+a*(s+r+i)}var ef=(e,a,t,l)=>{let n=em(t);return e*(l+n)+a*n},eb=(e,a,t)=>{let l=1-a;return{atLeastOneHit:1-(1-a)**e,atLeastOneCrit:1-(1-t)**e,firstHitCrits:t*((1-l**e)/(1-l))}},ey=e=>{let{advantage:a,attackMods:t,attacks:l,bonusDice:n,critBonus:r,critBonusDice:s,critThreshold:i,damageDice:o,damageMods:c,firstHitBonus:u,firstHitBonusDice:d,penaltyDice:h,targetAC:g}=e,x=eg(t,g,i,a,n,h),p=ex(i,a),{atLeastOneHit:v,atLeastOneCrit:m,firstHitCrits:j}=eb(l,x,p),f=ej(x,p,o,c,s,r),b=ef(v,j,d,u);return{accuracy:{hitChance:x,critChance:p,atLeastOneHit:v,atLeastOneCrit:m,firstHitCrits:j},damage:l*f+b}};let eZ=e=>e<4?3:e<8?4:5,eC=e=>e<2?0:eZ(e),ew=(e,a,t)=>{let l=eg(eZ(e)+E(e),a,20,t),n=y(e)*ej(l,ex(20,t),{d4:0,d6:1,d8:0,d10:1,d12:0,d20:0},eC(e));return{accuracy:l,damage:n}},eS=e=>e>=20?4:e>=11?3:e>=5?2:1,ek=(e,a,t)=>{let l=e>=8?5:e>=6?4:3,n=E(e),r=eS(e)+1,s=eg(l+n+(e>=4?-5:0)+2,a,20,t),i=r*ej(s,ex(20,t),{d6:1},l+(e>=4?10:0));return{accuracy:s,damage:i}},eD=(e,a,t)=>{let l=e>=8?5:e>=4?4:3,n=E(e),r=eg(l+n,a,20,t),s=ej(r,ex(20,t),{d8:1,d6:Math.ceil(e/2)},l);return{accuracy:r,damage:s}};var eA=(e,a,t,l)=>{switch(e){case"warlock":return ew(a,t,l);case"fighter":return ek(a,t,l);case"rogue":return eD(a,t,l);default:throw TypeError("Not a baseline type: ".concat(e))}};let eW=e=>{let{title:a,rows:t}=e;return(0,n.jsx)(ee.Z,{component:P.Z,elevation:1,sx:{maxWidth:"max-content"},children:(0,n.jsxs)(ea.Z,{children:[(0,n.jsx)(et.Z,{children:(0,n.jsx)(el.Z,{children:(0,n.jsx)(en.Z,{colSpan:2,variant:"head",children:(0,n.jsx)(W.Z,{variant:"subtitle1",children:a})})})}),(0,n.jsx)(er.Z,{children:t.map(e=>(0,n.jsxs)(el.Z,{children:[(0,n.jsx)(en.Z,{children:e.label}),(0,n.jsx)(en.Z,{children:(0,n.jsx)($,{value:e.value,style:e.style})})]},e.label))})]})})},eB=e=>{let{additionalMods:a,advantage:t,attackMods:l,attacks:s,baselineAdvantage:i,bonusDice:o,critBonus:c,critBonusDice:u,critThreshold:d,damageDice:h,damageMods:g,firstHitBonus:x,firstHitBonusDice:v,level:m,penaltyDice:j,targetAC:f}=e,[b,y]=(0,r.useState)("warlock"),[Z,C]=ei(a,l,g,m),{accuracy:w,damage:S}=ey({advantage:t,attackMods:Z,attacks:s,bonusDice:o,critBonus:c,critBonusDice:u,critThreshold:d,damageDice:h,damageMods:C,firstHitBonus:x,firstHitBonusDice:v,penaltyDice:j,targetAC:f}),k=eA(b,m,f,i),D=[{label:"Sum of attack modifiers",style:"decimal",value:Z},{label:"Chance to hit AC ".concat(f),style:"percent",value:w.hitChance},{label:"Baseline chance to hit",style:"percent",value:k.accuracy},{label:"Percentage of baseline",style:"percent",value:w.atLeastOneHit/k.accuracy}],A=[{label:"Sum of damage modifiers",style:"decimal",value:C},{label:"Average damage per round",style:"decimal",value:S},{label:"Baseline average damage per round",style:"decimal",value:k.damage},{label:"Percentage of baseline",style:"percent",value:S/k.damage}],W=[{label:"Chance of at least one hit",style:"percent",value:w.atLeastOneHit},{label:"Chance of at least one crit",style:"percent",value:w.atLeastOneCrit},{label:"Chance that first hit is a crit",style:"percent",value:w.firstHitCrits}];return(0,n.jsxs)(p.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:3,children:[(0,n.jsx)(eW,{title:"Accuracy",rows:D}),(0,n.jsx)(eW,{title:"Damage",rows:A}),(0,n.jsx)(eW,{title:"Additional Probabilities",rows:W}),(0,n.jsx)(F,{value:b,onChange:y})]})};var eT=eB,eF=t(5843);let eP=e=>{let{value:a,onChange:t,label:l,...r}=e;return(0,n.jsx)(j.Z,{control:(0,n.jsx)(eF.Z,{...r,checked:a,onChange:(e,a)=>{t(a)}}),label:l})};var eM=eP,eE=e=>e<=1/8?12:13+Math.floor(e/3);let eO=e=>{let{level:a,onChange:t,value:l}=e,[s,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{s&&t(eE(a))},[a,s]),(0,n.jsxs)(p.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:3,children:[(0,n.jsx)(S,{sx:{flexGrow:1},InputProps:{inputProps:{min:0}},label:"Target AC",title:"The Armor Class (AC) of the enemy being attacked.",name:"ac",value:l,onChange:t,disabled:s}),(0,n.jsx)(L,{label:"Use average AC",title:"Use the average AC for a monster whose CR equals your level (equal to 13 + CR/3 for CRs above 1/8).",value:s,onChange:i})]})};var eN=eO,e_=t(9008),eH=t.n(e_),eR=(0,t(1265).Z)({palette:{mode:"dark"}});function eI(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eH(),{children:[(0,n.jsx)("title",{children:"DPR Calculator"}),(0,n.jsx)("meta",{name:"description",content:"A DPR calculator for 5e"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,n.jsx)("main",{children:(0,n.jsxs)(i.Z,{theme:eR,children:[(0,n.jsx)(o.ZP,{}),(0,n.jsx)(H,{})]})})]})}}},function(e){e.O(0,[215,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);